DROP TABLE IF EXISTS ROLE_PERMISSIONS CASCADE;
DROP INDEX IF EXISTS IDX_ROLE_PERMISSIONS_ROLE_ID;
DROP INDEX IF EXISTS IDX_ROLE_PERMISSIONS_FUNCTION_ID;

CREATE TABLE ROLE_PERMISSIONS (
    ROLE_ID INTEGER,
    FUNCTION_ID CHAR(8),
    PERMISSION_KBN CHAR(1),
    CONSTRAINT PK_ROLE_PERMISSIONS PRIMARY KEY (ROLE_ID, FUNCTION_ID, PERMISSION_KBN),
    CONSTRAINT FK_ROLE_PERMISSIONS_ROLE_ID FOREIGN KEY (ROLE_ID) REFERENCES ROLES(ID)
);

CREATE INDEX IDX_ROLE_PERMISSIONS_ROLE_ID ON ROLE_PERMISSIONS (ROLE_ID);
CREATE INDEX IDX_ROLE_PERMISSIONS_FUNCTION_ID ON ROLE_PERMISSIONS (FUNCTION_ID);

INSERT INTO ROLE_PERMISSIONS (
    ROLE_ID,
    FUNCTION_ID,
    PERMISSION_KBN
) VALUES (
             1,
             'admin'
         );